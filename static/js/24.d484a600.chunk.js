(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[24],{1194:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n(19),c=n(13),i=n(11),o=n.n(i),l=n(0),s=n(569),u=n(532),d=n(472),j=n(563),f=n(545),b=n(1178),m=n(1179),O=n(568),h=n(550),v=n(178),p=n(557),x=n(87),g=n(606),w=n.n(g),_=n(658),C=n.n(_),S=n(626),k=n.n(S),q=n(225),y=n(593),D=n(96),U=n(223),I=n(601),T=n(15),L=n(179),W=n(1163),E=n(1205),A=n(480),F=n(578),R=n(552),P=n(1206),N=n(599),B=n(600),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(N.e)(Object(T.a)({first_name:Object(N.g)().required("required"),last_name:Object(N.g)().required("required"),is_staff:Object(N.b)().required("required"),username:Object(N.g)().required("required"),phone_number:Object(N.g)().optional(),email:Object(N.g)().required("required")},!e&&{img:Object(N.c)().optional(),password:Object(N.g)().required("required"),confirm_password:Object(N.g)().oneOf([Object(N.f)("password")],"Passwords do not match").required("required")}))},M={unique_id:"",first_name:"",last_name:"",is_staff:!1,username:"",phone_number:"",email:"",img:"",password:"",confirm_password:""};var V=n(224),z=n(35),G=n(1),H=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClose,c=e.form,i=void 0===c?null:c,s=e.afterSubmit,d=Object(z.a)().user,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(L.f)({resolver:Object(B.a)(J(e)),defaultValues:M}),n=function(){return t.reset(M)};return{form:t,resetForm:n}}(i),O=j.form,h=O.control,v=O.handleSubmit,p=O.setValue,x=j.resetForm,g=Object(U.a)(),w=g.startLoading,_=g.endLoading,C=g.isLoading,S=Object(D.a)(),k=S.showErrorToast,q=S.showSuccessToast,y=function(){var e=Object(a.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(),e.prev=1,n={},!i){e.next=12;break}return delete t.password,delete t.confirm_password,e.next=8,V.a.update(t.unique_id,t);case 8:n=e.sent,q("User successfully updated!"),e.next=16;break;case 12:return e.next=14,V.a.add(t);case 14:n=e.sent,q("User successfully registered!");case 16:s&&s(n),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),k(e.t0);case 22:_();case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){if(i){var e=i.first_name,t=i.last_name,n=i.is_staff,r=i.username,a=i.phone_number,c=i.email,o=i.unique_id;p("unique_id",o),p("first_name",e),p("last_name",t),p("is_staff",n),p("username",r),p("phone_number",a||""),p("email",c)}else x()}),[i]),Object(l.useEffect)((function(){n||x()}),[n]);var I=i?"Update User":"Add User",N=Object(l.useRef)(null);return Object(G.jsxs)(b.a,{fullWidth:!0,maxWidth:"lg",open:n,children:[Object(G.jsx)(m.a,{children:I}),Object(G.jsx)(E.a,{children:Object(G.jsxs)(u.a,{spacing:2,mt:2,children:[Object(G.jsxs)(u.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(G.jsx)(L.a,{name:"first_name",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*First name"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}}),Object(G.jsx)(L.a,{name:"last_name",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*Last name"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}})]}),Object(G.jsxs)(u.a,{direction:{xs:"column",md:"row"},spacing:2,children:[null===i&&Object(G.jsx)(L.a,{name:"img",control:h,render:function(e){var t=e.field,n=t.value,r=t.onBlur,a=(t.onChange,e.fieldState.error);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(f.a,{fullWidth:!0,label:"*Choose File",onClick:function(){return N.current.click()},value:(null===n||void 0===n?void 0:n.name)||"",contentEditable:!1,onBlur:r,error:!!a,helperText:null===a||void 0===a?void 0:a.message}),Object(G.jsx)("input",{ref:N,hidden:!0,type:"file",onChange:function(e){var t=e.target;p("img",(null===t||void 0===t?void 0:t.files[0])||"")}})]})}}),Object(G.jsx)(L.a,{name:"is_staff",control:h,render:function(e){var t=e.field,n=t.value,r=t.onChange;e.fieldState.error;return Object(G.jsx)(A.a,{children:Object(G.jsx)(F.a,{control:Object(G.jsx)(R.a,{defaultChecked:n,checked:n,value:n,onChange:function(e){var t=e.target;return r(t.checked)},sx:{color:"#e47b11",marginLeft:"-130px"}}),label:"Is a Staff",sx:{marginLeft:"120px"}})})}})]}),Object(G.jsx)(L.a,{name:"username",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*Username"},t),{},{disabled:!d.is_staff,error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}}),Object(G.jsxs)(u.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(G.jsx)(L.a,{name:"phone_number",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"Phone number"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}}),Object(G.jsx)(L.a,{name:"email",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*Email address"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}})]}),null===i&&Object(G.jsxs)(u.a,{direction:{xs:"column",md:"row"},spacing:2,children:[Object(G.jsx)(L.a,{name:"password",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*Password",type:"password"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}}),Object(G.jsx)(L.a,{name:"confirm_password",control:h,rules:{required:{value:null===i,message:"required"}},render:function(e){var t=e.field,n=e.fieldState.error;return Object(G.jsx)(f.a,Object(T.a)(Object(T.a)({fullWidth:!0,label:"*Confirm password",type:"password"},t),{},{error:!!n,helperText:null===n||void 0===n?void 0:n.message}))}})]})]})}),Object(G.jsxs)(P.a,{children:[Object(G.jsx)(W.a,{loading:C,disabled:C,onClick:r,children:"cancel"}),Object(G.jsx)(W.a,{variant:"contained",disabled:C,onClick:v(y),children:"save"})]})]})},K=n(609),Q=n(21),X=n(896),Y=n.n(X),Z=n(731),$=n.n(Z),ee=0,te=[{value:"all",label:"All"},{value:!0,label:"Admin"},{value:!1,label:"Clients"}],ne=[{id:"first_name",label:"Name",value:function(e){var t=e.first_name,n=e.last_name;return Object(G.jsx)(G.Fragment,{children:t+" "+n})},alignRight:!1},{id:"options",label:"Actions",align:"center",options:[{icon:w.a,text:"View profile",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"view"},{icon:C.a,text:"Update Profile",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"update"},{icon:k.a,text:"Delete register",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"delete"}]}];t.default=function(){var e=Object(Q.f)(),t=Object(I.a)(),n=t.data,i=t.selectedItem,g=t.setData,w=t.selectedIndex,_=t.handleCloseSelectedItem,C=t.handleSelectedItem,S=t.handleUpdateItem,k=t.handleRemoveItem,T=Object(D.a)(),L=T.showErrorToast,W=T.showSuccessToast,E=T.isLoading,A=Object(U.a)(),F=A.startLoading,R=A.endLoading,P=Object(y.a)(),N=P.isOpenDialog,B=P.openDialog,J=P.closeDialog,M=Object(y.a)(),z=M.isOpenDialog,X=M.openDialog,Z=M.closeDialog,re=Object(l.useState)(""),ae=Object(c.a)(re,2),ce=ae[0],ie=ae[1],oe=Object(l.useState)("all"),le=Object(c.a)(oe,2),se=le[0],ue=le[1],de=Object(l.useState)({}),je=Object(c.a)(de,2),fe=je[0],be=je[1],me=Object(l.useState)(!1),Oe=Object(c.a)(me,2),he=Oe[0],ve=Oe[1];Object(l.useEffect)((function(){var e=function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(),e.prev=1,e.next=4,V.a.list();case 4:(t=e.sent).length>0&&(g(t),ee=t.filter((function(e){return!0===e.is_staff})).length,t.length-ee),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),L(e.t0);case 11:R();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var pe=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=14;break}return F(),e.prev=2,e.next=5,V.a.delete(null===i||void 0===i?void 0:i.unique_id);case 5:W("User successfully deleted!"),k(),we(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),L(e.t0);case 13:R();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(fe.length>0)){e.next=12;break}return t={id_users:fe.map((function(e){return e.unique_id}))},e.next=5,V.a.exportUsers(t);case 5:n=e.sent,r=window.URL.createObjectURL(new Blob([n])),(a=document.createElement("a")).href=r,a.setAttribute("download","Users.xlsx"),document.body.appendChild(a),a.click();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),L(e.t0);case 17:ve(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=fe.map((function(e){return{ID:null===e||void 0===e?void 0:e.unique_id,Name:(null===e||void 0===e?void 0:e.first_name)+" "+(null===e||void 0===e?void 0:e.last_name)}})),$()({printable:t,properties:["ID","Name"],type:"json",header:'<h3 class="custom-h3">User list</h3>',style:".custom-h3 { text-align: center }",showModal:!0}),ve(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){J(),Z(),be([]),_()},_e=Object(l.useMemo)((function(){var e=n;if(ce&&(e=e.filter((function(e){return JSON.stringify(e).toLowerCase().includes(ce.trim().toLowerCase())}))),se&&"all"!==se){var t="true"===se;e=e.filter((function(e){return e.is_staff===t}))}return e}),[ce,se,n]);return Object(G.jsxs)(s.a,{children:[Object(G.jsxs)(u.a,{direction:{xs:"column",sm:"row"},flexWrap:"nowrap",justifyContent:"space-between",children:[Object(G.jsx)(v.a,{variant:"h2",mb:2,children:"Users"}),Object(G.jsx)(d.a,{direction:"row",alignItems:"center",children:Object(G.jsx)(j.a,{title:"Add New User",children:Object(G.jsx)(p.a,{variant:"contained",onClick:B,sx:{mr:{xs:0,sm:2},mb:{xs:1,sm:0},borderRadius:10,minWidth:40,py:1,height:"fit-content",bgcolor:"#E47911"},children:Object(G.jsx)(Y.a,{})})})})]}),Object(G.jsx)(q.a,{defaultSort:"first_name",header:ne,data:_e,handleMoreAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;switch(t){case"update":C(n),B();break;case"delete":C(n),X();break;case"view":e("/dashboard/user?id=".concat(null===n||void 0===n?void 0:n.unique_id,"&username=").concat(null===n||void 0===n?void 0:n.username))}},isSelectable:!0,isLoading:E,toolBarSection:Object(G.jsxs)(u.a,{p:2,spacing:2,direction:{sm:"column",md:"row"},children:[Object(G.jsx)(f.a,{fullWidth:!0,label:"search",value:ce,onChange:function(e){var t=e.target.value;return ie(t)}}),Object(G.jsx)(f.a,{fullWidth:!0,label:"Type",onChange:function(e){var t=e.target.value;return ue(t)},select:!0,SelectProps:{native:!0},children:te.map((function(e){return Object(G.jsx)("option",{value:e.value,children:e.label},e.value)}))})]}),onSelectedOptions:[{icon:Object(G.jsx)(x.a,{icon:"mdi:file-export"}),title:"export",action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(be(t),"export"===e)ve(!0)}}]}),Object(G.jsx)(H,{open:N,onClose:J,form:i,afterSubmit:function(e){w>-1?S(e):g((function(t){return[].concat(Object(r.a)(t),[e])})),we()}}),Object(G.jsx)(K.a,{open:z,onClose:Z,onDelete:pe,loading:E,contentText:"Are you sure about delete this user?"}),Object(G.jsxs)(b.a,{open:he,onClose:function(){return ve(!1)},children:[Object(G.jsx)(m.a,{children:"Set export format"}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{button:!0,onClick:ge,children:"PDF"}),Object(G.jsx)(h.a,{button:!0,onClick:xe,children:"Excel"})]})]})]})}},593:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(0);function c(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1];return{isOpenDialog:n,openDialog:function(){return c(!0)},closeDialog:function(){return c(!1)}}}},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),a=n(13),c=n(0);function i(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(null),l=Object(a.a)(o,2),s=l[0],u=l[1],d=Object(c.useState)(-1),j=Object(a.a)(d,2),f=j[0],b=j[1],m=function(){u(null),b(-1)};return{data:n,setData:i,selectedItem:s,selectedIndex:f,handleSelectedItem:function(e){var t=n.indexOf(e);t>-1&&(b(t),u(e))},handleCloseSelectedItem:m,handleUpdateItem:function(e){var t=f,a=Object(r.a)(n);a.splice(t,1,e),i(a),m()},handleRemoveItem:function(){var e=f,t=Object(r.a)(n);t.splice(e,1),i(t),m()}}}},609:function(e,t,n){"use strict";var r=n(1163),a=n(1178),c=n(1179),i=n(1205),o=n(716),l=n(1206),s=n(1);t.a=function(e){var t=e.open,n=e.onClose,u=e.onDelete,d=e.title,j=void 0===d?"":d,f=e.contentText,b=void 0===f?"":f,m=e.actionText,O=void 0===m?"":m,h=e.loading;return Object(s.jsxs)(a.a,{open:t,children:[Object(s.jsx)(c.a,{children:j||"Confirm Delete"}),Object(s.jsx)(i.a,{children:Object(s.jsx)(o.a,{children:b||"Are you sure you want to delete?"})}),Object(s.jsxs)(l.a,{children:[Object(s.jsx)(r.a,{loading:h,onClick:n,children:"Cancel"}),Object(s.jsx)(r.a,{loading:h,onClick:u,children:O||"Delete"})]})]})}}}]);
//# sourceMappingURL=24.d484a600.chunk.js.map