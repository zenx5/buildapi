(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[23],{1200:function(e,t,n){"use strict";n.r(t),n.d(t,"statusName",(function(){return B}));var r=n(19),a=n(11),c=n.n(a),i=n(937),s=n(569),o=n(532),u=n(178),l=n(0),d=n(670),f=n(225),b=n(601),p=n(593),v=n(223),j=n(96),h=n(606),O=n.n(h),x=n(15),m=n(13),g=n(1201),w=n(1196),k=n(1202),y=n(1203),S=n(1204),T=n(1181),q=n(1163),C=n(1178),I=n(1179),R=n(1205),D=n(545),W=n(1206),L=n(179),A=n(753),E=n(1),_=function(e){var t,n=e.open,a=void 0!==n&&n,i=e.onClose,s=e.form,f=e.afterSubmit,b=Object(A.a)(),p=b.form,h=p.control,O=(p.handleSubmit,p.setValue),_=b.resetForm,B=Object(v.a)(),F=B.startLoading,U=B.endLoading,N=B.isLoading,P=Object(j.a)(),V=P.showErrorToast,z=P.showSuccessToast,J=Object(l.useState)([]),M=Object(m.a)(J,2),H=M[0],X=M[1],Z=Object(l.useState)(""),G=Object(m.a)(Z,2),K=G[0],Q=G[1];Object(l.useEffect)((function(){a||(_(),X([]),Q(""))}),[a]),Object(l.useEffect)((function(){if(s){var e=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(),e.prev=1,e.next=4,Promise.all([d.a.getTicketInfo(s.id),d.a.getTicketConversation(s.id)]);case 4:t=e.sent,n=Object(m.a)(t,2),r=n[0],a=n[1],X(a),i=r.description_text,o=r.subject,O("description",i),O("subject",o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),V(e.t0);case 17:U();case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();e()}else _(),X([]),Q("")}),[s]);var Y=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}return e.abrupt("return",null);case 2:return F(),e.prev=3,e.next=6,d.a.sendReply(null===s||void 0===s?void 0:s.id,K);case 6:t=e.sent,z("Reply sended"),null===f||void 0===f||f(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),V(e.t0);case 14:U();case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)(C.a,{fullWidth:!0,maxWidth:"lg",open:a,children:[Object(E.jsx)(I.a,{children:"Ticket"}),Object(E.jsxs)(R.a,{children:[Object(E.jsxs)(o.a,{spacing:2,mt:2,children:[(null===s||void 0===s||null===(t=s.requester)||void 0===t?void 0:t.name)&&Object(E.jsx)(L.a,{name:"name",control:h,render:function(e){var t;e.field,e.fieldState.error;return Object(E.jsx)(D.a,{fullWidth:!0,label:"*Name",value:null===s||void 0===s||null===(t=s.requester)||void 0===t?void 0:t.name,disabled:!0})}}),Object(E.jsx)(L.a,{name:"subject",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(E.jsx)(D.a,Object(x.a)({fullWidth:!0,disabled:Boolean(s),label:"*Subject",error:!!n,helperText:null===n||void 0===n?void 0:n.message},t))}}),Object(E.jsx)(L.a,{name:"description",control:h,render:function(e){var t=e.field,n=e.fieldState.error;return Object(E.jsx)(D.a,Object(x.a)({fullWidth:!0,label:"*Description",disabled:Boolean(s),multiline:!0,rows:6,error:!!n,helperText:null===n||void 0===n?void 0:n.message},t))}})]}),H.length>0&&Object(E.jsx)(g.a,{position:"right",children:H.map((function(e,t){var n,r;return Object(E.jsxs)(w.a,{position:"right",sx:{"&:before":{content:"none"}},children:[Object(E.jsxs)(k.a,{children:[Object(E.jsx)(y.a,{color:"primary"}),Object(E.jsx)(S.a,{})]}),Object(E.jsxs)(T.a,{children:[Object(E.jsxs)(u.a,{variant:"subtitle2",component:"span",children:[(null===e||void 0===e?void 0:e.support_email)||""," ("," ".concat(null===e||void 0===e||null===(n=e.created_at)||void 0===n||null===(r=n.split("T"))||void 0===r?void 0:r[0]," "),")"]}),Object(E.jsx)(u.a,{children:(null===e||void 0===e?void 0:e.body_text)||""})]})]},t.toString())}))})]}),Object(E.jsx)(W.a,{children:Object(E.jsxs)(o.a,{width:"100%",px:2,children:[![4,5].includes(null===s||void 0===s?void 0:s.status)&&Object(E.jsx)(D.a,{fullWidth:!0,label:"Send a reply",value:K,onChange:function(e){return Q(e.target.value)},multiline:!0,rows:3,sx:{mt:1,mb:3}}),Object(E.jsxs)(o.a,{direction:"row",justifyContent:"flex-end",children:[Object(E.jsx)(q.a,{loading:N,onClick:i,children:"cancel"}),![4,5].includes(null===s||void 0===s?void 0:s.status)&&Object(E.jsx)(q.a,{loading:N,variant:"contained",onClick:Y,children:"send reply"})]})]})})]})},B={2:"Open",3:"Pending",4:"Resolved",5:"Closed",6:"Waiting on Customer",7:"Waiting on Third Party"},F=function(e){switch(e){case 4:case 5:return"success";default:return"warning"}},U=[{id:"requester",label:"Requester",value:function(e){return e.requester.name||""},alignRight:!1},{id:"subject",label:"Subject",value:"subject",alignRight:!1},{id:"status",label:"Status",value:function(e){var t=e.status;return Object(E.jsx)(i.a,{sx:{color:"#fff"},label:B[t],color:F(t)})},alignRight:!1},{id:"created_at",label:"Send Date",value:function(e){var t,n=e.created_at;return null===n||void 0===n||null===(t=n.split("T"))||void 0===t?void 0:t[0]},alignRight:!1},{id:"options",label:"Actions",align:"center",options:[{icon:O.a,text:"View details",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"view"}]}];t.default=function(){var e=Object(b.a)(),t=e.data,n=e.selectedItem,a=e.setData,i=(e.selectedIndex,e.handleCloseSelectedItem),h=e.handleSelectedItem,O=(e.handleUpdateItem,Object(p.a)()),x=O.isOpenDialog,m=O.openDialog,g=O.closeDialog,w=Object(v.a)(),k=w.startLoading,y=w.endLoading,S=w.isLoading,T=Object(j.a)().showErrorToast;Object(l.useEffect)((function(){var e=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.prev=1,e.next=4,d.a.getAllTickets();case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T(e.t0);case 11:y();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var q=function(){g(),i()};return Object(E.jsxs)(s.a,{maxWidth:"lg",children:[Object(E.jsx)(o.a,{direction:{xs:"column",sm:"row"},flexWrap:"nowrap",justifyContent:"space-between",children:Object(E.jsx)(u.a,{variant:"h2",mb:2,children:"Tickets"})}),Object(E.jsx)(f.a,{header:U,data:t,isLoading:S,handleMoreAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("view"===e)h(t),m()}}),Object(E.jsx)(_,{open:x,onClose:q,form:n,afterSubmit:function(e){q()}})]})}},593:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(0);function c(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1];return{isOpenDialog:n,openDialog:function(){return c(!0)},closeDialog:function(){return c(!1)}}}},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),a=n(13),c=n(0);function i(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(null),o=Object(a.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(-1),f=Object(a.a)(d,2),b=f[0],p=f[1],v=function(){l(null),p(-1)};return{data:n,setData:i,selectedItem:u,selectedIndex:b,handleSelectedItem:function(e){var t=n.indexOf(e);t>-1&&(p(t),l(e))},handleCloseSelectedItem:v,handleUpdateItem:function(e){var t=b,a=Object(r.a)(n);a.splice(t,1,e),i(a),v()},handleRemoveItem:function(){var e=b,t=Object(r.a)(n);t.splice(e,1),i(t),v()}}}},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(19),a=n(11),c=n.n(a),i=n(141),s=n.n(i).a.create({baseURL:"https://automationempire.freshdesk.com/api/v2/tickets/",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("iaeop6p6moF6vCcZ3v:X")}}),o={createTicket:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllTickets:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("?include=requester");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getTicketByEmail:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("?email=".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTicketInfo:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTicketConversation:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/".concat(t,"/conversations"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendReply:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post("/".concat(t,"/reply"),{body:u(n)});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},u=function(e){return'<div style="font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif; font-size:14px">\n<div dir="ltr">'.concat(e,'\n</div>\n<div dir="ltr"><div><br></div></div>\n</div>')}},753:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(179),a=n(599),c=n(600),i=Object(a.e)({name:Object(a.g)().required("required"),subject:Object(a.g)().required("required"),description:Object(a.g)().required("required"),status:Object(a.d)().required("required"),priority:Object(a.d)().required("required")}),s={name:"",subject:"",description:"",status:2,priority:1};function o(){var e=Object(r.f)({resolver:Object(c.a)(i),defaultValues:s});return{form:e,resetForm:function(){return e.reset(s)}}}}}]);
//# sourceMappingURL=23.b2646634.chunk.js.map