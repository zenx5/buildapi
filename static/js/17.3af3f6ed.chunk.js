/*! For license information please see 17.3af3f6ed.chunk.js.LICENSE.txt */
(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[17],{1195:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n(19),o=n(13),c=n(11),i=n.n(c),u=n(569),l=n(178),s=n(532),d=n(557),f=n(545),p=n(0),b=n(606),v=n.n(b),m=n(752),h=n.n(m),j=n(593),x=n(644),O=n(325),g=n(225),y=n(223),w=n(601),_=n(1178),k=n(1179),S=n(1205),F=n(563),C=n(1206),P=n(561),M=n(87),E=n(21),T=n(585),D=n(602),N=n(1),B=function(e){var t,n,r=e.open,a=void 0!==r&&r,o=e.onClose,c=e.form,i=Object(E.f)();return Object(N.jsxs)(_.a,{open:a,fullWidth:!0,maxWidth:"lg",children:[Object(N.jsx)(k.a,{children:"Payment Details"}),Object(N.jsx)(S.a,{children:Object(N.jsxs)(s.a,{spacing:4,mt:2,children:[Object(N.jsx)(s.a,{children:Object(N.jsx)(f.a,{"aria-readonly":!0,value:null===c||void 0===c||null===(t=c.invoice)||void 0===t?void 0:t.store.name,label:"Store",InputProps:{endAdornment:Object(N.jsx)(T.a,{position:"end",children:Object(N.jsx)(F.a,{title:"View store",children:Object(N.jsx)(P.a,{onClick:function(){var e,t,n,r;return i("/dashboard/store?id=".concat(null===c||void 0===c||null===(e=c.invoice)||void 0===e||null===(t=e.store)||void 0===t?void 0:t.unique_id,"&name=").concat(null===c||void 0===c||null===(n=c.invoice)||void 0===n?void 0:n.store.name,"&status=").concat(null===c||void 0===c||null===(r=c.invoice)||void 0===r?void 0:r.store.status))},children:Object(N.jsx)(M.a,{icon:v.a,color:"#E47911"})})})})}})}),Object(N.jsx)(s.a,{children:Object(N.jsx)(f.a,{"aria-readonly":!0,value:null===c||void 0===c||null===(n=c.invoice)||void 0===n?void 0:n.description,label:"Invoice",InputProps:{endAdornment:Object(N.jsx)(T.a,{position:"end",children:Object(N.jsx)(F.a,{title:"View invoice",children:Object(N.jsx)(P.a,{onClick:function(){var e;return i("/dashboard/invoice?id=".concat(null===c||void 0===c||null===(e=c.invoice)||void 0===e?void 0:e.unique_id))},children:Object(N.jsx)(M.a,{icon:v.a,color:"#E47911"})})})})}})}),Object(N.jsxs)(s.a,{direction:{sm:"column",md:"row"},spacing:2,children:[Object(N.jsx)(f.a,{fullWidth:!0,"aria-readonly":!0,value:null===c||void 0===c?void 0:c.date,label:"Created At"}),Object(N.jsx)(f.a,{fullWidth:!0,"aria-readonly":!0,value:null===c||void 0===c?void 0:c.unique_id,label:"ID"})]}),Object(N.jsxs)(s.a,{direction:{sm:"column",md:"row"},spacing:2,children:[Object(N.jsx)(f.a,{fullWidth:!0,"aria-readonly":!0,value:Object(D.c)(null===c||void 0===c?void 0:c.amount),label:"Amount"}),Object(N.jsx)(f.a,{fullWidth:!0,"aria-readonly":!0,value:null===c||void 0===c?void 0:c.stripe_confirmation_number,label:"Stripe confirmation number"})]})]})}),Object(N.jsx)(C.a,{children:Object(N.jsx)(d.a,{variant:"contained",onClick:o,children:"close"})})]})},L=n(639),R=n(619),A=n(35),I=n(96),q=n(15),W=n(179),$=n(1163),z=n(732),U=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClose,c=(e.form,e.afterSubmit),u=Object(A.a)().user,l=Object(z.a)(),d=l.form,b=d.control,v=d.handleSubmit,m=l.resetForm,h=Object(y.a)(),j=h.startLoading,O=h.endLoading,g=Object(I.a)(),w=g.showErrorToast,F=g.showSuccessToast,P=Object(p.useState)([]),M=Object(o.a)(P,2),E=M[0],T=M[1];Object(p.useEffect)((function(){var e=function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.loadPayment(u.store_default.unique_id);case 3:t=e.sent,T(t.items),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(p.useEffect)((function(){n||m()}),[n]);var D=function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(),e.prev=1,e.next=4,x.a.sendReportProblem(t);case 4:F("problem successfully send!"),c&&c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w(e.t0);case 11:O();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(_.a,{fullWidth:!0,maxWidth:"lg",open:n,children:[Object(N.jsx)(k.a,{children:"Report Problem"}),Object(N.jsx)(S.a,{children:Object(N.jsxs)(s.a,{spacing:2,mt:2,children:[Object(N.jsx)(W.a,{name:"payment",control:b,render:function(e){var t=e.field,n=e.fieldState.error;return Object(N.jsx)(f.a,Object(q.a)(Object(q.a)({fullWidth:!0,label:"*Payment",error:!!n,helperText:null===n||void 0===n?void 0:n.message},t),{},{select:!0,SelectProps:{native:!0},children:E.map((function(e){return Object(N.jsxs)("option",{value:null===e||void 0===e?void 0:e.unique_id,children:["Payment: ",e.unique_id]},e)}))}))}}),Object(N.jsx)(W.a,{name:"issue_description",control:b,render:function(e){var t=e.field,n=e.fieldState.error;return Object(N.jsx)(f.a,Object(q.a)({fullWidth:!0,label:"*Issue description",error:!!n,helperText:null===n||void 0===n?void 0:n.message},t))}})]})}),Object(N.jsxs)(C.a,{children:[Object(N.jsx)($.a,{onClick:r,children:"cancel"}),Object(N.jsx)($.a,{variant:"contained",onClick:v(D),children:"save"})]})]})},J=n(869),V=n(609),Z=n(183),Y=["All","Store Management","Agreement Renewal Fees","Other"],G=[{id:"invoice.store.name",label:"Name",value:function(e){var t,n=e.invoice;return Object(N.jsx)(N.Fragment,{children:null===n||void 0===n||null===(t=n.store)||void 0===t?void 0:t.name})},alignRight:!1},{id:"invoice.description",label:"Concept",value:function(e){var t=e.invoice;return Object(N.jsx)(N.Fragment,{children:(null===t||void 0===t?void 0:t.description)||""})},alignRight:!1},{id:"amount",label:"Amount",value:function(e){var t=e.amount;return Object(N.jsx)(N.Fragment,{children:Object(D.b)(t)})},alignRight:!1},{id:"date",label:"Date",value:function(e){var t=e.date;return Object(N.jsx)(N.Fragment,{children:Object(Z.a)(t)})},alignRight:!1},{id:"options",label:"Actions",align:"center",options:[{icon:v.a,text:"Show payment details",onClick:function(e,t){return{el:e,action:t}},color:"orange",action:"show"},{icon:h.a,text:"Download",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"download"}]}];t.default=function(){var e=Object(A.a)().user,t=Object(I.a)().showErrorToast,n=Object(w.a)(),c=n.data,b=n.selectedItem,v=n.setData,m=n.handleSelectedItem,h=Object(p.useRef)(null),_=Object(y.a)(),k=_.startLoading,S=_.endLoading,F=_.isLoading,C=Object(j.a)(),P=C.isOpenDialog,E=C.openDialog,T=C.closeDialog,D=Object(j.a)(),q=D.isOpenDialog,W=D.openDialog,$=D.closeDialog,z=Object(j.a)(),Z=z.isOpenDialog,K=z.openDialog,X=z.closeDialog,Q=Object(j.a)(),H=Q.isOpenDialog,ee=Q.openDialog,te=Q.closeDialog,ne=Object(p.useState)([]),re=Object(o.a)(ne,2),ae=(re[0],re[1]),oe=Object(p.useState)(""),ce=Object(o.a)(oe,2),ie=ce[0],ue=ce[1],le=Object(p.useState)("All"),se=Object(o.a)(le,2),de=se[0],fe=se[1],pe=Object(p.useState)("all"),be=Object(o.a)(pe,2),ve=be[0],me=be[1],he=Object(p.useState)("all"),je=Object(o.a)(he,2),xe=je[0],Oe=je[1],ge=Object(p.useState)([{label:"All",value:"all"}]),ye=Object(o.a)(ge,2),we=ye[0],_e=ye[1],ke=function(){var n=Object(a.a)(i.a.mark((function n(){var a,o,c,u,l,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k(),n.prev=1,!e.is_staff){n.next=9;break}return n.next=5,x.a.listAdmin();case 5:c=n.sent,v(c.items),n.next=14;break;case 9:if(e.is_staff||!e.store_default){n.next=14;break}return n.next=12,x.a.listCustomer(e.store_default.unique_id);case 12:c=n.sent,v(c.items);case 14:u=null===(a=c)||void 0===a||null===(o=a.items)||void 0===o?void 0:o.map((function(e){return Object(O.a)(new Date(e.date),"y")})),l=Object(r.a)(new Set(u)),s=l.map((function(e){return{label:e,value:e}})),_e((function(e){return[].concat(Object(r.a)(e),Object(r.a)(s))})),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),t(n.t0);case 23:S();case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(){return n.apply(this,arguments)}}();Object(p.useEffect)((function(){ke()}),[]);var Se=function(){var e=Object(a.a)(i.a.mark((function e(){var n,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.download(b.invoice.unique_id);case 3:r=e.sent,a=window.URL.createObjectURL(new Blob([r])),(o=document.createElement("a")).href=a,o.setAttribute("download","Invoice - ".concat(null===(n=b.invoice)||void 0===n?void 0:n.description,".pdf")),document.body.appendChild(o),o.click(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0);case 15:te();case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Fe=Object(p.useMemo)((function(){var e=c;return ie&&(e=e.filter((function(e){return JSON.stringify(e).toLowerCase().includes(ie.trim().toLowerCase())}))),de&&"All"!==de&&(e=e.filter((function(e){var t,n;return null===(t=e.invoice)||void 0===t||null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(de.toLowerCase())}))),ve&&"all"!==ve&&(e=e.filter((function(e){var t,n;return(null===(t=e.date)||void 0===t?void 0:t.split("-")[1])&&parseInt(null===(n=e.date)||void 0===n?void 0:n.split("-")[1])===parseInt(ve)}))),xe&&"all"!==xe&&(e=e.filter((function(e){var t;return(null===(t=e.date)||void 0===t?void 0:t.split("-")[0])===xe.toString()}))),e}),[ie,de,ve,xe,c]),Ce=function(){var e=Object(a.a)(i.a.mark((function e(n){var r,a,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n.length>0)){e.next=12;break}return a=n.map((function(e){return e.unique_id})),e.next=5,x.a.exportPayments(a);case 5:o=e.sent,c=window.URL.createObjectURL(new Blob([o])),(u=document.createElement("a")).href=c,u.setAttribute("download","payments.xlsx"),document.body.appendChild(u),u.click();case 12:null===(r=h.current)||void 0===r||r.clearSelected(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(u.a,{children:[Object(N.jsx)(l.a,{variant:"h2",mb:2,children:"Payments"}),!e.is_staff&&Object(N.jsxs)(s.a,{direction:{xs:"column",md:"row"},spacing:2,justifyContent:"center",mb:5,children:[Object(N.jsx)(d.a,{variant:"contained",onClick:W,children:"Make A Payment"}),Object(N.jsx)(d.a,{variant:"contained",onClick:K,children:"Report A Problem"})]}),Object(N.jsx)(g.a,{ref:h,header:G,data:Fe,isSelectable:!0,isLoading:F,handleMoreAction:function(e,t){switch(e){case"show":m(t),E();break;case"download":m(t),ee()}},onSelectedOptions:[{icon:Object(N.jsx)(M.a,{icon:"mdi:file-export"}),title:"export excel",action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(ae(t),"export excel"===e)Ce(t)}}],toolBarSection:Object(N.jsxs)(s.a,{p:2,spacing:2,direction:{xs:"column",md:"row"},children:[Object(N.jsx)(f.a,{fullWidth:!0,label:"search",value:ie,onChange:function(e){var t=e.target.value;return ue(t)}}),Object(N.jsx)(f.a,{fullWidth:!0,label:"Concept",value:de,onChange:function(e){var t=e.target.value;return fe(t)},select:!0,SelectProps:{native:!0},children:Y.map((function(e){return Object(N.jsx)("option",{value:e,children:e},e)}))}),Object(N.jsx)(f.a,{fullWidth:!0,label:"Months",value:ve,onChange:function(e){var t=e.target.value;return me(t)},select:!0,SelectProps:{native:!0},children:L.b.map((function(e){return Object(N.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(N.jsx)(f.a,{fullWidth:!0,label:"Years",value:xe,onChange:function(e){var t=e.target.value;return Oe(t)},select:!0,SelectProps:{native:!0},children:we.map((function(e){return Object(N.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})}),!e.is_staff&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(J.a,{open:q,onClose:$,afterSubmit:function(){$(),ke()}}),Object(N.jsx)(U,{open:Z,onClose:X,afterSubmit:X})]}),Object(N.jsx)(B,{open:P,onClose:T,form:b}),Object(N.jsx)(V.a,{title:"Download invoice",contentText:"Are you sure you want to download this invoice?",actionText:"Download",open:H,onClose:te,onDelete:Se})]})}},593:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13),a=n(0);function o(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1];return{isOpenDialog:n,openDialog:function(){return o(!0)},closeDialog:function(){return o(!1)}}}},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(20),a=n(13),o=n(0);function c(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(null),u=Object(a.a)(i,2),l=u[0],s=u[1],d=Object(o.useState)(-1),f=Object(a.a)(d,2),p=f[0],b=f[1],v=function(){s(null),b(-1)};return{data:n,setData:c,selectedItem:l,selectedIndex:p,handleSelectedItem:function(e){var t=n.indexOf(e);t>-1&&(b(t),s(e))},handleCloseSelectedItem:v,handleUpdateItem:function(e){var t=p,a=Object(r.a)(n);a.splice(t,1,e),c(a),v()},handleRemoveItem:function(){var e=p,t=Object(r.a)(n);t.splice(e,1),c(t),v()}}}},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u}));var r=n(13),a=(n(138),n(618)),o=n.n(a);function c(e){return o()(e).format("$ 0,0.00")}function i(e){if(e>=1e9){var t=(e/1e6).toFixed(1).split("."),n=Object(r.a)(t,2),a=n[0],c=n[1];return a+("0"!==c?".".concat(c):"")+"G"}if(e>=1e6){var i=(e/1e6).toFixed(1).split("."),u=Object(r.a)(i,2),l=u[0],s=u[1];return l+("0"!==s?".".concat(s):"")+"M"}if(e>=1e3){var d=(e/1e3).toFixed(1).split("."),f=Object(r.a)(d,2),p=f[0],b=f[1];return p+("0"!==b?".".concat(b):"")+"K"}return o()(e).format("0,0.00")}function u(e){return o()(e).format("0,0.00")}},606:function(e,t){t.__esModule=!0,t.default={body:'<circle cx="12" cy="12" r="1.5" fill="currentColor"/><path fill="currentColor" d="M21.87 11.5c-.64-1.11-4.16-6.68-10.14-6.5c-5.53.14-8.73 5-9.6 6.5a1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25c5.53-.14 8.74-5 9.6-6.5a1 1 0 0 0 0-1Zm-9.87 4a3.5 3.5 0 1 1 3.5-3.5a3.5 3.5 0 0 1-3.5 3.5Z"/>',width:24,height:24}},609:function(e,t,n){"use strict";var r=n(1163),a=n(1178),o=n(1179),c=n(1205),i=n(716),u=n(1206),l=n(1);t.a=function(e){var t=e.open,n=e.onClose,s=e.onDelete,d=e.title,f=void 0===d?"":d,p=e.contentText,b=void 0===p?"":p,v=e.actionText,m=void 0===v?"":v,h=e.loading;return Object(l.jsxs)(a.a,{open:t,children:[Object(l.jsx)(o.a,{children:f||"Confirm Delete"}),Object(l.jsx)(c.a,{children:Object(l.jsx)(i.a,{children:b||"Are you sure you want to delete?"})}),Object(l.jsxs)(u.a,{children:[Object(l.jsx)(r.a,{loading:h,onClick:n,children:"Cancel"}),Object(l.jsx)(r.a,{loading:h,onClick:s,children:m||"Delete"})]})]})}},618:function(e,t,n){var r,a;r=function(){var e,t,n="2.0.6",r={},a={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function i(e,t){this._input=e,this._value=t}return(e=function(n){var a,o,u,l;if(e.isNumeral(n))a=n.value();else if(0===n||"undefined"===typeof n)a=0;else if(null===n||t.isNaN(n))a=null;else if("string"===typeof n)if(c.zeroFormat&&n===c.zeroFormat)a=0;else if(c.nullFormat&&n===c.nullFormat||!n.replace(/[^0-9]+/g,"").length)a=null;else{for(o in r)if((l="function"===typeof r[o].regexps.unformat?r[o].regexps.unformat():r[o].regexps.unformat)&&n.match(l)){u=r[o].unformat;break}a=(u=u||e._.stringToNumber)(n)}else a=Number(n)||null;return new i(n,a)}).version=n,e.isNumeral=function(e){return e instanceof i},e._=t={numberToFormat:function(t,n,r){var o,c,i,u,l,s,d,f=a[e.options.currentLocale],p=!1,b=!1,v=0,m="",h=1e12,j=1e9,x=1e6,O=1e3,g="",y=!1;if(t=t||0,c=Math.abs(t),e._.includes(n,"(")?(p=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(l=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(o=!!(o=n.match(/a(k|m|b|t)?/))&&o[1],e._.includes(n," a")&&(m=" "),n=n.replace(new RegExp(m+"a[kmbt]?"),""),c>=h&&!o||"t"===o?(m+=f.abbreviations.trillion,t/=h):c<h&&c>=j&&!o||"b"===o?(m+=f.abbreviations.billion,t/=j):c<j&&c>=x&&!o||"m"===o?(m+=f.abbreviations.million,t/=x):(c<x&&c>=O&&!o||"k"===o)&&(m+=f.abbreviations.thousand,t/=O)),e._.includes(n,"[.]")&&(b=!0,n=n.replace("[.]",".")),i=t.toString().split(".")[0],u=n.split(".")[1],s=n.indexOf(","),v=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,u?(e._.includes(u,"[")?(u=(u=u.replace("]","")).split("["),g=e._.toFixed(t,u[0].length+u[1].length,r,u[1].length)):g=e._.toFixed(t,u.length,r),i=g.split(".")[0],g=e._.includes(g,".")?f.delimiters.decimal+g.split(".")[1]:"",b&&0===Number(g.slice(1))&&(g="")):i=e._.toFixed(t,0,r),m&&!o&&Number(i)>=1e3&&m!==f.abbreviations.trillion)switch(i=String(Number(i)/1e3),m){case f.abbreviations.thousand:m=f.abbreviations.million;break;case f.abbreviations.million:m=f.abbreviations.billion;break;case f.abbreviations.billion:m=f.abbreviations.trillion}if(e._.includes(i,"-")&&(i=i.slice(1),y=!0),i.length<v)for(var w=v-i.length;w>0;w--)i="0"+i;return s>-1&&(i=i.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),0===n.indexOf(".")&&(i=""),d=i+g+(m||""),p?d=(p&&y?"(":"")+d+(p&&y?")":""):l>=0?d=0===l?(y?"-":"+")+d:d+(y?"-":"+"):y&&(d="-"+d),d},stringToNumber:function(e){var t,n,r,o=a[c.currentLocale],i=e,u={thousand:3,million:6,billion:9,trillion:12};if(c.zeroFormat&&e===c.zeroFormat)n=0;else if(c.nullFormat&&e===c.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==o.delimiters.decimal&&(e=e.replace(/\./g,"").replace(o.delimiters.decimal,".")),u)if(r=new RegExp("[^a-zA-Z]"+o.abbreviations[t]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),i.match(r)){n*=Math.pow(10,u[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return"number"===typeof e&&isNaN(e)})),includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!==typeof t)throw new TypeError(t+" is not a function");var n,r=Object(e),a=r.length>>>0,o=0;if(3===arguments.length)n=arguments[2];else{for(;o<a&&!(o in r);)o++;if(o>=a)throw new TypeError("Reduce of empty array with no initial value");n=r[o++]}for(;o<a;o++)o in r&&(n=t(n,r[o],o,r));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(e,n){var r=t.multiplier(n);return e>r?e:r}),1)},toFixed:function(e,t,n,r){var a,o,c,i,u=e.toString().split("."),l=t-(r||0);return a=2===u.length?Math.min(Math.max(u[1].length,l),t):l,c=Math.pow(10,a),i=(n(e+"e+"+a)/c).toFixed(a),r>t-a&&(o=new RegExp("\\.?0{1,"+(r-(t-a))+"}$"),i=i.replace(o,"")),i}},e.options=c,e.formats=r,e.locales=a,e.locale=function(e){return e&&(c.currentLocale=e.toLowerCase()),c.currentLocale},e.localeData=function(e){if(!e)return a[c.currentLocale];if(e=e.toLowerCase(),!a[e])throw new Error("Unknown locale : "+e);return a[e]},e.reset=function(){for(var e in o)c[e]=o[e]},e.zeroFormat=function(e){c.zeroFormat="string"===typeof e?e:null},e.nullFormat=function(e){c.nullFormat="string"===typeof e?e:null},e.defaultFormat=function(e){c.defaultFormat="string"===typeof e?e:"0.0"},e.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},e.validate=function(t,n){var r,a,o,c,i,u,l,s;if("string"!==typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{l=e.localeData(n)}catch(d){l=e.localeData(e.locale())}return o=l.currency.symbol,i=l.abbreviations,r=l.delimiters.decimal,a="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,(null===(s=t.match(/^[^\d]+/))||(t=t.substr(1),s[0]===o))&&(null===(s=t.match(/[^\d]+$/))||(t=t.slice(0,-1),s[0]===i.thousand||s[0]===i.million||s[0]===i.billion||s[0]===i.trillion))&&(u=new RegExp(a+"{2}"),!t.match(/[^\d.,]/g)&&!((c=t.split(r)).length>2)&&(c.length<2?!!c[0].match(/^\d+.*\d$/)&&!c[0].match(u):1===c[0].length?!!c[0].match(/^\d+$/)&&!c[0].match(u)&&!!c[1].match(/^\d+$/):!!c[0].match(/^\d+.*\d$/)&&!c[0].match(u)&&!!c[1].match(/^\d+$/)))},e.fn=i.prototype={clone:function(){return e(this)},format:function(t,n){var a,o,i,u=this._value,l=t||c.defaultFormat;if(n=n||Math.round,0===u&&null!==c.zeroFormat)o=c.zeroFormat;else if(null===u&&null!==c.nullFormat)o=c.nullFormat;else{for(a in r)if(l.match(r[a].regexps.format)){i=r[a].format;break}o=(i=i||e._.numberToFormat)(u,l,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var n=t.correctionFactor.call(null,this._value,e);function r(e,t,r,a){return e+Math.round(n*t)}return this._value=t.reduce([this._value,e],r,0)/n,this},subtract:function(e){var n=t.correctionFactor.call(null,this._value,e);function r(e,t,r,a){return e-Math.round(n*t)}return this._value=t.reduce([e],r,Math.round(this._value*n))/n,this},multiply:function(e){function n(e,n,r,a){var o=t.correctionFactor(e,n);return Math.round(e*o)*Math.round(n*o)/Math.round(o*o)}return this._value=t.reduce([this._value,e],n,1),this},divide:function(e){function n(e,n,r,a){var o=t.correctionFactor(e,n);return Math.round(e*o)/Math.round(n*o)}return this._value=t.reduce([this._value,e],n),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var a,o=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),a=e._.numberToFormat(t,n,r),e._.includes(a,")")?((a=a.split("")).splice(-1,0,o+"BPS"),a=a.join("")):a=a+o+"BPS",a},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),function(){var t={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},r=t.suffixes.concat(n.suffixes.filter((function(e){return t.suffixes.indexOf(e)<0}))).join("|");r="("+r.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(r)},format:function(r,a,o){var c,i,u,l=e._.includes(a,"ib")?n:t,s=e._.includes(a," b")||e._.includes(a," ib")?" ":"";for(a=a.replace(/\s?i?b/,""),c=0;c<=l.suffixes.length;c++)if(i=Math.pow(l.base,c),u=Math.pow(l.base,c+1),null===r||0===r||r>=i&&r<u){s+=l.suffixes[c],i>0&&(r/=i);break}return e._.numberToFormat(r,a,o)+s},unformat:function(r){var a,o,c=e._.stringToNumber(r);if(c){for(a=t.suffixes.length-1;a>=0;a--){if(e._.includes(r,t.suffixes[a])){o=Math.pow(t.base,a);break}if(e._.includes(r,n.suffixes[a])){o=Math.pow(n.base,a);break}}c*=o||1}return c}})}(),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var a,o,c=e.locales[e.options.currentLocale],i={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),a=e._.numberToFormat(t,n,r),t>=0?(i.before=i.before.replace(/[\-\(]/,""),i.after=i.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(i.before,"-")&&!e._.includes(i.before,"(")&&(i.before="-"+i.before),o=0;o<i.before.length;o++)switch(i.before[o]){case"$":a=e._.insert(a,c.currency.symbol,o);break;case" ":a=e._.insert(a," ",o+c.currency.symbol.length-1)}for(o=i.after.length-1;o>=0;o--)switch(i.after[o]){case"$":a=o===i.after.length-1?a+c.currency.symbol:e._.insert(a,c.currency.symbol,-(i.after.length-(1+o)));break;case" ":a=o===i.after.length-1?a+" ":e._.insert(a," ",-(i.after.length-(1+o)+c.currency.symbol.length-1))}return a}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var a=("number"!==typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(a[0]),n,r)+"e"+a[1]},unformat:function(t){var n=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),r=Number(n[0]),a=Number(n[1]);function o(t,n,r,a){var o=e._.correctionFactor(t,n);return t*o*(n*o)/(o*o)}return a=e._.includes(t,"e-")?a*=-1:a,e._.reduce([r,Math.pow(10,a)],o,1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var a=e.locales[e.options.currentLocale],o=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),o+=a.ordinal(t),e._.numberToFormat(t,n,r)+o}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var a,o=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),a=e._.numberToFormat(t,n,r),e._.includes(a,")")?((a=a.split("")).splice(-1,0,o+"%"),a=a.join("")):a=a+o+"%",a},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var r=Math.floor(e/60/60),a=Math.floor((e-60*r*60)/60),o=Math.round(e-60*r*60-60*a);return r+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),e},void 0===(a="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=a)},619:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(19),a=n(11),o=n.n(a),c=n(26),i="invoice",u={general:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/general/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),list:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/store/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),listPending:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/pending/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),get:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),report:function(){var e=Object(r.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(i,"/").concat(t,"/report/"),{filterDate:n});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),download:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/download_invoice/"),{responseType:"blob"});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},639:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=[{label:"All",value:"all"},{label:"JAN",value:1},{label:"FEB",value:2},{label:"MAR",value:3},{label:"APR",value:4},{label:"MAY",value:5},{label:"JUN",value:6},{label:"JUL",value:7},{label:"AUG",value:8},{label:"SEP",value:9},{label:"OCT",value:10},{label:"NOV",value:11},{label:"DEC",value:12}],a=["Store Management","Agreement Renewal Fees","Other"]},644:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(19),a=n(11),o=n.n(a),c=n(26),i="payment",u="payment_report",l={get:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),report:function(){var e=Object(r.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(i,"/").concat(t,"/report/"),{filterDate:n});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadInvoice:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/load_invoice/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),downloadInvoice:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("invoice/".concat(t,"/download_invoice/"),{responseType:"blob"});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pay:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(i,"/pay/"),{invoice_id:t.invoice_id,payment_object:t.payment_intent});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loadPayment:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/payments/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),listAdmin:function(){var e=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/all/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listCustomer:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(i,"/").concat(t,"/payments/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),listAdminReports:function(){var e=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(u,"/all/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listCustomerReports:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(u,"/").concat(t,"/reports/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendReportProblem:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(u,"/"),{payment:t.payment,issue_description:t.issue_description});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getReports:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("".concat(u,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendReportPayment:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(i,"/"),{amount:parseFloat(t.amount).toFixed(2),date:t.date,invoice:t.invoice,method:t.method,status:t.status,stripe_confirmation_number:t.reference,owner:t.owner});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),exportPayments:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(i,"/export_payments/"),{id_payments:t},{responseType:"blob"});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),exportPaymentsReports:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(u,"/export_reports/"),{id_reports:t},{responseType:"blob"});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},716:function(e,t,n){"use strict";var r=n(5),a=n(2),o=n(0),c=n(114),i=n(3),u=n(8),l=n(178),s=n(86),d=n(95);function f(e){return Object(s.a)("MuiDialogContentText",e)}Object(d.a)("MuiDialogContentText",["root"]);var p=n(1),b=["children"],v=Object(i.a)(l.a,{shouldForwardProp:function(e){return Object(i.b)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),m=o.forwardRef((function(e,t){var n=Object(u.a)({props:e,name:"MuiDialogContentText"}),o=Object(r.a)(n,b),i=function(e){var t=e.classes,n=Object(c.a)({root:["root"]},f,t);return Object(a.a)({},t,n)}(o);return Object(p.jsx)(v,Object(a.a)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:o},n,{classes:i}))}));t.a=m},732:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(179),a=n(599),o=n(600),c=Object(a.e)({payment:Object(a.g)().required("required"),issue_description:Object(a.g)().required("required")}),i={payment:"",issue_description:""};function u(){var e=Object(r.f)({resolver:Object(o.a)(c),defaultValues:i});return{form:e,resetForm:function(){return e.reset(i)}}}},752:function(e,t){t.__esModule=!0,t.default={body:'<rect width="16" height="2" x="4" y="18" fill="currentColor" rx="1" ry="1"/><rect width="4" height="2" x="3" y="17" fill="currentColor" rx="1" ry="1" transform="rotate(-90 5 18)"/><rect width="4" height="2" x="17" y="17" fill="currentColor" rx="1" ry="1" transform="rotate(-90 19 18)"/><path fill="currentColor" d="M12 15a1 1 0 0 1-.58-.18l-4-2.82a1 1 0 0 1-.24-1.39a1 1 0 0 1 1.4-.24L12 12.76l3.4-2.56a1 1 0 0 1 1.2 1.6l-4 3a1 1 0 0 1-.6.2Z"/><path fill="currentColor" d="M12 13a1 1 0 0 1-1-1V4a1 1 0 0 1 2 0v8a1 1 0 0 1-1 1Z"/>',width:24,height:24}},869:function(e,t,n){"use strict";var r=n(4),a=n(15),o=n(19),c=n(13),i=n(11),u=n.n(i),l=n(1178),s=n(1179),d=n(1205),f=n(532),p=n(545),b=n(1191),v=n(579),m=n(1206),h=n(0),j=n(223),x=n(96),O=n(1163),g=n(732),y=n(619),w=n(35),_=n(644),k=n(117),S=n(235),F=n(472),C=n(602),P=n(1),M=Object(h.memo)((function(e){var t=e.clientSecret,n=void 0===t?"":t,r=e.setStripe,a=void 0===r?function(){}:r,i=e.setElemetnts,l=void 0===i?function(){}:i,s=e.setCardElement,d=void 0===s?function(){}:s,f=e.handlePayInvoice,p=e.invoice,b=Object(k.useStripe)(),v=Object(k.useElements)(),m=Object(h.useState)(null),j=Object(c.a)(m,2),O=j[0],g=j[1],y=Object(x.a)(),w=y.showSuccessToast,_=y.showErrorToast;return Object(h.useEffect)((function(){a(n?b:null),l(n?v:null),d(n?null===v||void 0===v?void 0:v.getElement(k.CardElement):null)}),[n,b,v]),Object(h.useEffect)((function(){if(b&&null!==p&&void 0!==p&&p.amount)try{var e=parseFloat(Object(C.b)(p.amount)),t=100*e,n=b.paymentRequest({country:"US",currency:"usd",total:{label:"Invoice pay",amount:e>0?parseFloat(t.toFixed(2)):0},requestPayerName:!0,requestPayerEmail:!0});n.canMakePayment().then(function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&g(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error"),console.warn(e)}))}catch(r){_("Something went wrong")}}),[b,p]),Object(h.useEffect)((function(){null===O||void 0===O||O.on("paymentmethod",function(){var e=Object(o.a)(u.a.mark((function e(t){var r,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.confirmCardPayment(n,{payment_method:t.paymentMethod.id},{handleActions:!1});case 2:if(r=e.sent,a=r.paymentIntent,!(o=r.error)){e.next=10;break}w(o.message),t.complete("fail"),e.next=20;break;case 10:if(t.complete("success"),"requires_action"!==a.status){e.next=19;break}return e.next=14,b.confirmCardPayment(n);case 14:c=e.sent,(i=c.error)?w(i.message):null===f||void 0===f||f(a),e.next=20;break;case 19:null===f||void 0===f||f(a);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[O,n,b]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(F.a,{sx:{mb:5},children:O&&Object(P.jsx)(k.PaymentRequestButtonElement,{options:{paymentRequest:O}})}),Object(P.jsx)(k.CardElement,{id:"card-s-ref"})]})}));t.a=function(e){var t,n=e.open,i=void 0!==n&&n,F=e.onClose,E=e.form,T=e.afterSubmit,D=Object(w.a)().user,N=Object(g.a)(),B=N.form,L=(B.control,B.handleSubmit,N.resetForm),R=Object(j.a)(),A=R.startLoading,I=R.endLoading,q=R.isLoading,W=Object(j.a)(),$=W.startLoading,z=W.endLoading,U=W.isLoading,J=Object(x.a)(),V=J.showErrorToast,Z=J.showSuccessToast,Y=Object(h.useState)([]),G=Object(c.a)(Y,2),K=G[0],X=G[1],Q=Object(h.useState)({}),H=Object(c.a)(Q,2),ee=H[0],te=H[1],ne=Object(h.useState)(""),re=Object(c.a)(ne,2),ae=re[0],oe=re[1],ce=Object(h.useState)(null),ie=Object(c.a)(ce,2),ue=ie[0],le=ie[1],se=Object(h.useState)(null),de=Object(c.a)(se,2),fe=de[0],pe=de[1],be=Object(h.useState)(null),ve=Object(c.a)(be,2),me=ve[0],he=ve[1];Object(h.useEffect)((function(){te(E||{}),E&&xe(E)}),[E]),Object(h.useEffect)((function(){if(null!==D&&void 0!==D&&D.store_default&&!E&&i){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.listPending(null===D||void 0===D||null===(t=D.store_default)||void 0===t?void 0:t.unique_id);case 3:n=e.sent,X(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),V(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}}),[null===D||void 0===D?void 0:D.store_default,E,i]),Object(h.useEffect)((function(){i||L()}),[i]);var je=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(),e.prev=1,ue&&fe&&me){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ue.confirmCardPayment(ae,{payment_method:{card:me}});case 6:if(!(t=e.sent).error){e.next=11;break}V(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message),e.next=17;break;case 11:if("succeeded"!==(null===t||void 0===t||null===(r=t.paymentIntent)||void 0===r?void 0:r.status)){e.next=16;break}return e.next=14,Oe(null===t||void 0===t?void 0:t.paymentIntent);case 14:e.next=17;break;case 16:V(t.paymentIntent.status);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),V(e.t0);case 22:I();case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return $(),oe(""),e.prev=4,te(t),e.next=8,_.a.loadInvoice(t.unique_id);case 8:n=e.sent,oe(null===n||void 0===n?void 0:n.client_secret),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),V(e.t0);case 15:z();case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee&&t){e.next=2;break}return e.abrupt("return",null);case 2:return A(),e.prev=3,e.next=6,_.a.pay({payment_intent:t,invoice_id:ee.unique_id});case 6:Z("Your Payment has been successfully received. \ud83d\udcb0 "),te({}),null===T||void 0===T||T(null),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),V(e.t0);case 14:I();case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),ge=Object(S.a)("pk_live_VXeFxTdzMvwmWR1IJYQuvWiX00lnSquolS");return Object(P.jsxs)(l.a,{fullWidth:!0,maxWidth:"lg",open:i,children:[Object(P.jsx)(s.a,{children:"Make payment"}),Object(P.jsxs)(d.a,{children:[Object(P.jsxs)(f.a,{spacing:2,mt:2,mb:5,children:[E?Object(P.jsx)(p.a,{disabled:!0,label:"Invoice",value:(null===ee||void 0===ee?void 0:ee.description)||""}):Object(P.jsx)(b.a,(t={fullWidth:!0,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.description)||""},value:null===D||void 0===D?void 0:D.store_default,onChange:function(e,t){return xe(t)},options:K},Object(r.a)(t,"value",ee),Object(r.a)(t,"disabled",q),Object(r.a)(t,"renderInput",(function(e){return Object(P.jsx)(p.a,Object(a.a)(Object(a.a)({},e),{},{disabled:q,label:"Select invoice"}))})),t)),Object(P.jsx)(p.a,{disabled:!0,label:"Amount to pay",value:null!==ee&&void 0!==ee&&ee.amount?Object(C.b)(null===ee||void 0===ee?void 0:ee.amount):""})]}),U&&Object(P.jsx)(v.a,{}),ae&&Object(P.jsx)(k.Elements,{stripe:ge,options:{clientSecret:ae},children:Object(P.jsx)(M,{handlePayInvoice:Oe,clientSecret:ae,setElemetnts:pe,setStripe:le,setCardElement:he,invoice:ee})})]}),Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{loading:q,disabled:q,onClick:F,children:"cancel"}),Object(P.jsx)(O.a,{loading:q,disabled:q,variant:"contained",onClick:je,children:"save"})]})]})}}}]);
//# sourceMappingURL=17.3af3f6ed.chunk.js.map