{"version":3,"sources":["views/Chat.js"],"names":["projectId","Chat","user","useAuth","useLoading","startLoading","endLoading","useEffect","is_staff","initChat","a","axios","get","headers","username","unique_id","formdata","FormData","append","post","console","log","className","height","projectID","userName","userSecret"],"mappings":"0MAQMA,EAAY,uCAsDHC,UApDF,WACX,IAAQC,EAASC,cAATD,KACR,EAAqCE,cAA7BC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,WAkCtB,OAhCAC,qBAAU,WACR,GAAKL,GAAQ,OAACA,QAAD,IAACA,KAAMM,SAApB,CAEA,IAAMC,EAAQ,uCAAG,4BAAAC,EAAA,6DACfL,IADe,kBAGPM,IAAMC,IAAI,sCAAuC,CACrDC,QAAS,CACP,aAAcb,EACd,YAAaE,EAAKY,SAClB,cAAeZ,EAAKa,aAPX,wEAYPC,EAAW,IAAIC,UACVC,OAAO,QAAS,kBACzBF,EAASE,OAAO,WAAYhB,EAAKY,UACjCE,EAASE,OAAO,SAAUhB,EAAKa,WAfpB,UAgBLJ,IAAMQ,KAAK,mCAAoCH,EAAU,CAC7DH,QAAS,CAAE,cAAe,0CAjBjB,0DAoBXO,QAAQC,IAAI,cApBD,QAuBff,IAvBe,gEAAH,qDA0BdG,GA5BoC,CA6BrC,GAAE,CAACP,IAEA,OAACA,QAAD,IAACA,KAAMM,SAGT,qBAAKc,UAAU,aAAf,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEC,OAAO,sBACPC,UAAWxB,EACXyB,SAAQ,OAAEvB,QAAF,IAAEA,OAAF,EAAEA,EAAMY,SAChBY,WAAU,OAAExB,QAAF,IAAEA,OAAF,EAAEA,EAAMa,gBATE,IAc7B,C","file":"static/js/28.eab39b8a.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { ChatEngine } from \"react-chat-engine\";\r\n\r\nimport Container from \"@mui/material/Container\";\r\nimport useAuth from \"../hooks/useAuth\";\r\nimport useLoading from \"../hooks/useLoading\";\r\n\r\nconst projectId = \"46306e76-77eb-4db2-bb2a-96a4ccefcbd0\";\r\n\r\nconst Chat = () => {\r\n  const { user } = useAuth();\r\n  const { startLoading, endLoading } = useLoading();\r\n\r\n  useEffect(() => {\r\n    if (!user || !user?.is_staff) return;\r\n\r\n    const initChat = async () => {\r\n      startLoading();\r\n      try {\r\n        await axios.get(\"https://api.chatengine.io/users/me/\", {\r\n          headers: {\r\n            \"Project-ID\": projectId,\r\n            \"User-Name\": user.username,\r\n            \"User-Secret\": user.unique_id,\r\n          },\r\n        });\r\n      } catch (error) {\r\n        try {\r\n          let formdata = new FormData();\r\n          formdata.append(\"email\", \"test@gmail.com\");\r\n          formdata.append(\"username\", user.username);\r\n          formdata.append(\"secret\", user.unique_id);\r\n          await axios.post(\"https://api.chatengine.io/users/\", formdata, {\r\n            headers: { \"PRIVATE-KEY\": \"7ce23584-324e-42e4-a4d4-5f2ea02d147e\" },\r\n          });\r\n        } catch (error) {\r\n          console.log(\"chat error\");\r\n        }\r\n      }\r\n      endLoading();\r\n    };\r\n\r\n    initChat();\r\n  }, [user]);\r\n\r\n  if (!user?.is_staff) return null;\r\n\r\n  return (\r\n    <div className=\"chats-page\">\r\n      <Container>\r\n        <ChatEngine\r\n          height=\"calc(100vh  - 66px)\"\r\n          projectID={projectId}\r\n          userName={user?.username}\r\n          userSecret={user?.unique_id}\r\n        />\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"sourceRoot":""}