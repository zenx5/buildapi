(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[19],{1192:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var r=n(19),a=n(13),c=n(11),s=n.n(c),o=n(569),i=n(532),u=n(178),l=n(563),d=n(557),f=n(1178),p=n(1205),b=n(538),h=n(0),j=n(1163),x=n(1179),v=n(545),O=n(1206),m=n(223),g=n(96),k=n(730),w=n(1),_=function(e){var t,n=e.open,c=void 0!==n&&n,o=e.onClose,i=Object(h.useState)(null),u=Object(a.a)(i,2),l=u[0],d=u[1],b=Object(m.a)(),_=b.startLoading,y=b.endLoading,C=b.isLoading,S=Object(g.a)(),L=S.showSuccessToast,D=S.showErrorToast,M=Object(h.useRef)(null);Object(h.useEffect)((function(){c||d(null)}),[c]);var W=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),e.prev=1,e.next=4,k.a.addSales(l);case 4:L("Sales successfully registered!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),D(e.t0);case 10:o(),y();case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(f.a,{maxWidth:"lg",fullWidth:!0,open:c,onClose:o,children:[Object(w.jsx)(x.a,{sx:{fontSize:{xs:24}},children:"Add sale"}),Object(w.jsxs)(p.a,{children:[Object(w.jsx)(v.a,{sx:{mt:2},onClick:function(){var e;return null===(e=M.current)||void 0===e?void 0:e.click()},contentEditable:!1,label:"Add File",value:null!==(t=null===l||void 0===l?void 0:l.name)&&void 0!==t?t:""}),Object(w.jsx)("input",{ref:M,hidden:!0,type:"file",onChange:function(e){return function(e){d(null);var t=null===e||void 0===e?void 0:e.files[0];if(t){var n,r,a=null===(n=t.name)||void 0===n||null===(r=n.split("."))||void 0===r?void 0:r.pop();["xlsx","xlsb","xls","xlsm"].includes(a)&&d(t)}}(e.target)}})]}),Object(w.jsxs)(O.a,{children:[Object(w.jsx)(j.a,{loading:C,onClick:o,children:"Close"}),Object(w.jsx)(j.a,{variant:"contained",disabled:!l,loading:C,onClick:W,children:"add register"})]})]})},y=n(225),C=n(606),S=n.n(C),L=n(21),D=n(602),M=[{id:"store",label:"Store",value:"name",alignRight:!1},{id:"totalSold",label:"Total sold",value:function(e){var t=e.total_sold;return Object(w.jsx)(w.Fragment,{children:Object(D.b)(t)})},align:"center"},{id:"options",label:"Actiones",align:"center",options:[{icon:S.a,text:"View",onClick:function(e,t){return{el:e,action:t}},color:"green",action:"view"}]}],W=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClose,a=e.data,c=void 0===a?[]:a,s=e.option,o=void 0===s?"":s,i=e.title,u=void 0===i?"":i,l=e.isLoading,b=void 0!==l&&l,h=Object(L.f)();return Object(w.jsxs)(f.a,{maxWidth:"lg",fullWidth:!0,open:n,onClose:r,children:[Object(w.jsx)(x.a,{sx:{fontSize:{xs:24}},children:u}),Object(w.jsx)(p.a,{children:Object(w.jsx)(y.a,{isLoading:b,title:o,header:M,data:c,handleMoreAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("view"===e)h("/dashboard/store?id=".concat(t.unique_id,"&name=").concat(t.name,"&status=").concat(t.status))}})}),Object(w.jsx)(O.a,{children:Object(w.jsx)(d.a,{onClick:r,children:"Close"})})]})},A=n(34),E=n(570),R=n(472),T=n(657),F=n.n(T),z=function(e){var t=e.title,n=void 0===t?"":t,r=e.value,a=void 0===r?0:r,c=(e.content,e.onClick),s=e.is_staff,o=void 0!==s&&s,l={colors:[Object(A.a)().palette.primary.main],chart:{sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"68%",borderRadius:2}},labels:["1","2","3","4","5","6","7","8"],tooltip:{x:{show:!1},y:{formatter:function(e){return e},title:{formatter:function(){return""}}},marker:{show:!1}}};return Object(w.jsx)(E.a,{sx:{display:"flex",alignItems:"center",p:3},children:Object(w.jsxs)(i.a,{width:"100%",children:[Object(w.jsxs)(R.a,{sx:{display:"flex",width:"100%"},children:[Object(w.jsxs)(R.a,{sx:{flexGrow:1,mr:3},children:[Object(w.jsx)(u.a,{variant:"subtitle2",children:n}),Object(w.jsxs)(u.a,{variant:"h4",children:[Object(D.c)(a)," USD "]})]}),Object(w.jsx)(F.a,{type:"bar",series:[{data:[10,20,30,20,10]}],options:l,width:60,height:36})]}),Object(w.jsx)(R.a,{sx:{display:"flex",width:"100%"},children:o&&Object(w.jsx)(d.a,{variant:"contained",onClick:c,sx:{mt:3},children:"View Details"})})]})})},V=n(593),G=n(749),I=n(750),Y=n.n(I),q=n(35),H=[{id:"date",label:"Date",value:"date",alignRight:!1},{id:"user",label:"User",value:"user",alignRight:!1},{id:"options",label:"Actions",align:"center",options:[]}];function J(){var e=Object(q.a)().user,t=Object(g.a)().showErrorToast,n=Object(V.a)(),c=n.isOpenDialog,j=n.openDialog,x=n.closeDialog,v=Object(V.a)(),O=v.isOpenDialog,C=v.openDialog,S=v.closeDialog,L=Object(V.a)(),D=L.isOpenDialog,M=L.openDialog,A=L.closeDialog,E=Object(m.a)(),R=E.startLoading,T=E.endLoading,F=E.isLoading,I=Object(h.useState)({total_week:0,total_current_sales:0,total_year:0,total_three_months:0}),J=Object(a.a)(I,2),U=J[0],Z=J[1],B=Object(h.useState)({alreadyLoad:!1,current_month:[]}),K=Object(a.a)(B,2),P=K[0],Q=K[1],$=Object(h.useState)({alreadyLoad:!1,week:[]}),N=Object(a.a)($,2),X=N[0],ee=N[1],te=Object(h.useState)({alreadyLoad:!1,three_months:[]}),ne=Object(a.a)(te,2),re=ne[0],ae=ne[1],ce=Object(h.useState)({alreadyLoad:!1,year:[]}),se=Object(a.a)(ce,2),oe=se[0],ie=se[1],ue=Object(h.useState)([]),le=Object(a.a)(ue,2),de=le[0],fe=(le[1],Object(h.useState)("")),pe=Object(a.a)(fe,2),be=pe[0],he=pe[1],je=Object(h.useState)(""),xe=Object(a.a)(je,2),ve=xe[0],Oe=xe[1];Object(h.useEffect)((function(){var n=function(){var n=Object(r.a)(s.a.mark((function n(){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e.is_staff){n.next=8;break}return n.next=4,k.a.general();case 4:r=n.sent,Z(r),n.next=13;break;case 8:if(e.is_staff||!e.store_default){n.next=13;break}return n.next=11,G.a.general(e.store_default.unique_id);case 11:a=n.sent,Z(a);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),t(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);var me=function(){var t=Object(r.a)(s.a.mark((function t(n){var r,a,c,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R(),t.prev=1,t.t0=n,t.next="current_month"===t.t0?5:"current_week"===t.t0?18:"current_year"===t.t0?31:"three_months"===t.t0?44:57;break;case 5:if(t.prev=5,!e.is_staff){t.next=12;break}return t.next=9,k.a.currentMonth();case 9:r=t.sent,a=r.current_month,Q({current_month:a,alreadyLoad:!0});case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),console.log(t.t1);case 17:return t.abrupt("break",59);case 18:if(t.prev=18,!e.is_staff){t.next=25;break}return t.next=22,k.a.currentWeek();case 22:c=t.sent,o=c.week,ee({week:o,alreadyLoad:!0});case 25:t.next=30;break;case 27:t.prev=27,t.t2=t.catch(18),console.log(t.t2);case 30:return t.abrupt("break",59);case 31:if(t.prev=31,!e.is_staff){t.next=38;break}return t.next=35,k.a.currentYear();case 35:i=t.sent,u=i.year,ie({year:u,alreadyLoad:!0});case 38:t.next=43;break;case 40:t.prev=40,t.t3=t.catch(31),console.log(t.t3);case 43:return t.abrupt("break",59);case 44:if(t.prev=44,!e.is_staff){t.next=51;break}return t.next=48,k.a.threeMonths();case 48:l=t.sent,d=l.three_months,ae({three_months:d,alreadyLoad:!0});case 51:t.next=56;break;case 53:t.prev=53,t.t4=t.catch(44),console.log(t.t4);case 56:return t.abrupt("break",59);case 57:return Oe(""),t.abrupt("break",59);case 59:t.next=64;break;case 61:t.prev=61,t.t5=t.catch(1),console.log(t.t5);case 64:T();case 65:case"end":return t.stop()}}),t,null,[[1,61],[5,14],[18,27],[31,40],[44,53]])})));return function(e){return t.apply(this,arguments)}}(),ge=function(e){switch(he(e),e){case"current_month":Oe("Current month"),me(e);break;case"current_week":Oe("Current week"),me(e);break;case"three_months":Oe("Last three month"),me(e);break;case"current_year":Oe("Current year"),me(e);break;default:Oe("")}C()},ke=Object(h.useMemo)((function(){switch(be){case"current_month":return P.current_month;case"current_week":return X.week;case"three_months":return re.three_months;case"current_year":return oe.year;default:return[]}}),[be,P,re,X,oe]);return Object(w.jsxs)(o.a,{children:[Object(w.jsxs)(i.a,{direction:{xs:"column",sm:"row"},flexWrap:"nowrap",justifyContent:"space-between",children:[Object(w.jsx)(u.a,{variant:"h2",textAlign:"center",mb:3,children:"Sales"}),e.is_staff&&Object(w.jsxs)(b.a,{direction:"row",alignItems:"center",children:[Object(w.jsx)(l.a,{title:"ADD A SALE REGISTER",children:Object(w.jsx)(d.a,{variant:"contained",sx:{mr:{xs:0,sm:3},mb:{xs:2,sm:2,md:0},borderRadius:10,minWidth:40,py:1,height:"fit-content",bgcolor:"#E47911"},onClick:j,children:Object(w.jsx)(Y.a,{})})}),Object(w.jsx)(_,{open:c,onClose:x})]})]}),Object(w.jsxs)(b.a,{sx:{display:"grid",gridTemplateColumns:{xs:"none",md:"max-content max-content"},gap:2,width:"fit-content",mx:"auto"},children:[Object(w.jsx)(z,{title:"Week",is_staff:e.is_staff,onClick:function(){return ge("current_week")},value:U.total_week}),Object(w.jsx)(z,{title:"Month",is_staff:e.is_staff,onClick:function(){return ge("current_month")},value:U.total_current_sales}),Object(w.jsx)(z,{title:"Quarter",is_staff:e.is_staff,onClick:function(){return ge("three_months")},value:U.total_three_months}),Object(w.jsx)(z,{title:"Year",is_staff:e.is_staff,onClick:function(){return ge("current_year")},value:U.total_year})]}),e.is_staff&&Object(w.jsxs)(b.a,{display:"flex",justifyContent:"center",mt:8,children:[Object(w.jsx)(d.a,{variant:"contained",onClick:M,children:"show register"}),Object(w.jsx)(f.a,{maxWidth:"lg",fullWidth:!0,open:D,onClose:A,children:Object(w.jsx)(p.a,{children:Object(w.jsx)(y.a,{isLoading:F,header:H,data:de})})})]}),Object(w.jsx)(W,{isLoading:F,title:"Total sold by store",option:ve,data:ke,open:O,onClose:S})]})}},593:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(0);function c(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1];return{isOpenDialog:n,openDialog:function(){return c(!0)},closeDialog:function(){return c(!1)}}}},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(13),a=(n(138),n(618)),c=n.n(a);function s(e){return c()(e).format("$ 0,0.00")}function o(e){if(e>=1e9){var t=(e/1e6).toFixed(1).split("."),n=Object(r.a)(t,2),a=n[0],s=n[1];return a+("0"!==s?".".concat(s):"")+"G"}if(e>=1e6){var o=(e/1e6).toFixed(1).split("."),i=Object(r.a)(o,2),u=i[0],l=i[1];return u+("0"!==l?".".concat(l):"")+"M"}if(e>=1e3){var d=(e/1e3).toFixed(1).split("."),f=Object(r.a)(d,2),p=f[0],b=f[1];return p+("0"!==b?".".concat(b):"")+"K"}return c()(e).format("0,0.00")}function i(e){return c()(e).format("0,0.00")}},606:function(e,t){t.__esModule=!0,t.default={body:'<circle cx="12" cy="12" r="1.5" fill="currentColor"/><path fill="currentColor" d="M21.87 11.5c-.64-1.11-4.16-6.68-10.14-6.5c-5.53.14-8.73 5-9.6 6.5a1 1 0 0 0 0 1c.63 1.09 4 6.5 9.89 6.5h.25c5.53-.14 8.74-5 9.6-6.5a1 1 0 0 0 0-1Zm-9.87 4a3.5 3.5 0 1 1 3.5-3.5a3.5 3.5 0 0 1-3.5 3.5Z"/>',width:24,height:24}},730:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19),a=n(11),c=n.n(a),s=n(26),o="admin/sales",i={addSales:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,s.a.post("".concat(o,"/"),n,{headers:{"Content-Type":"multipart/form-data"}});case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editSale:function(){var e=Object(r.a)(c.a.mark((function e(t,n,r){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/").concat(t,"/"),{amount_sold:n,store:r});case 2:return a=e.sent,i=a.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeSale:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("".concat(o,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),general:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/general/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),list:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),currentMonth:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/current_month/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),currentWeek:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/week/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),currentYear:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/year/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),threeMonths:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/three_months/"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},749:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19),a=n(11),c=n.n(a),s=n(26),o="sales",i={list:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/").concat(t,"/store/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),general:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/").concat(t,"/general/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),get:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("".concat(o,"/").concat(t,"/"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},750:function(e,t,n){"use strict";var r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(40)),c=n(1),s=(0,a.default)((0,c.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox");t.default=s}}]);
//# sourceMappingURL=19.8a03250c.chunk.js.map